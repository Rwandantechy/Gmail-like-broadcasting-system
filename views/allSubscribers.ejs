<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="/styles/clock.css" />
    <link rel="stylesheet" href="/styles/dashboard.css" />

    <script
      src="https://kit.fontawesome.com/56c42c8616.js"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.tiny.cloud/1/h68ksxb6z97t3esyfmqior2w8o9fdhqhf6dukewly7zdr4x1/tinymce/6/tinymce.min.js"
      referrerpolicy="origin"
    ></script>
    <title>Nishkaam:: Dashboard</title>
    <style>
      .all-body {
        overflow: hidden;
        overflow-y: hidden;
      }
      .all-body::-webkit-scrollbar {
        display: none;
      }

      .main-content {
        flex-grow: 1;
        overflow-y: auto;
        max-height: calc(100vh - 120px);
      }
      #composeEmailModal {
        display: none;
        position: absolute;
        max-height: calc(100vh - 30px);
        top: 60% !important;
        left: 50%;
        overflow-y: auto;
        flex-grow: 2;
        transform: translate(-50%, -50%);
        z-index: 1000;
      }
    </style>
  </head>
  <!-- body start here -->
  <body
    class="bg-gradient-to-b from-green-900 via-yellow-100 to-purple-100 min-h-screen"
  >
    <!-- main section here -->
    <main>
      <!-- header start here -->
      <header
        class="fixed top-0 left-0 right-0 z-10 bg-transparent border-white dark:bg-gray-900 flex flex-row items-center justify-between p-3 shadow-inner"
      >
        <img src="/images/logo1.png" width="200" alt="logo" />
        <div
          class="w-full sm:w-3/5 md:w-2/5 lg:w-3/5 bg-white border border-black rounded-full"
        >
          <form class="flex items-center" action="" method="get">
            <i class="ml-3 fas fa-search text-gray-600"></i>
            <input
              class="p-2 w-full bg-transparent border-none outline-none"
              type="text"
              placeholder="Search"
              name="email-keyword"
            />
          </form>
        </div>
        <div class="flex flex-row items-center justify-between">
          <div class="bg-gray-200 pr-3 pl-3 pt-2 pb-2 rounded-full">
            <i onclick="showSettings()" class="fas fa-cog text-gray-600"> </i>
            <div class="settings">
              <img
                src="/images/passport photo.png"
                width="90"
                height="90"
                alt="user profile image"
              />
              <a class="fa-pen-photo" href="changePhoto"
                ><i class="fas fa-sharp fa-light fa-pen"></i>
              </a>
              <span>Hi,<%=username%></span>
              <h2>
                <a href="/settings">Manage Your Account </a>
              </h2>
              <br />
              <ul class="menu-items">
                <li class="items">
                  <a href="dashboard"><%=username%>@gmail.com</a>
                </li>
                <li class="items">
                  <a href="logout/email">Add new Account</a>
                </li>
                <li class="items"><a href="logout">Logout all Accounts</a></li>
              </ul>
            </div>
          </div>
          <div
            class="flex items-center ml-3 mr-5 bg-gray-100 text-black p-2 rounded-md user-profile"
          >
            <img
              src="/images/passport photo.png"
              class="rounded-full"
              width="16"
              height="16"
              alt="user's profile"
            />
            <h4 class="ml-1 font-semibold">
              <%=username %>
              <i
                onclick="showSettings()"
                class="fa-solid fa-caret-down text-blue-900 logut-switch-account"
              ></i>
            </h4>
          </div>
        </div>
      </header>
      <!-- header ends here -->
      <!--  the main content starts here  -->
      <section class="all-body flex flex-col md:flex-row pt-20">
        <!-- left menu starts here  -->
        <aside
          class="left-menu w-full md:w-1/5 h-4/5 bg-transparent shadow-lg rounded-t"
        >
          <!-- Button trigger modal -->
          <button
            type="button"
            id="openModalButton"
            class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 m-3 rounded mb-5"
          >
            <i class="fas fa-plus mr-2"></i>
            <span>Compose Email</span>
          </button>

          <ul class="flex flex-col">
            <li class="mb-2">
              <a
                href="dashboard"
                class="hover:bg-gray-500 rounded-r-full text-black font-semibold py-2 px-4 rounded inline-flex items-center"
              >
                <i class="fas fa-home mr-2"></i>
                <span>Home</span>
              </a>
            </li>
            <li class="mb-2">
              <a
                href="dashboard"
                class="hover:bg-gray-500 rounded-r-full text-black font-semibold py-2 px-4 rounded inline-flex items-center"
              >
                <i class="fas fa-paper-plane mr-2"></i>
                <span>Sent Emails</span>
              </a>
            </li>
            <li class="mb-2">
              <a
                href="drafts"
                class="hover:bg-gray-500 rounded-r-full text-black font-semibold py-2 px-4 rounded inline-flex items-center"
              >
                <i class="fas fa-edit mr-2"></i>
                <span>Drafts</span>
              </a>
            </li>
            <li class="mb-2">
              <a
                href="subscribers"
                class="hover:bg-gray-500 rounded-r-full text-black font-semibold py-2 px-4 rounded inline-flex items-center"
              >
                <i class="fas fa-user mr-2"></i>
                <span>All Subscribers</span>
              </a>
            </li>
            <!-- scheduled  -->
            <li class="mb-2">
              <a
                href="scheduled"
                class="hover:bg-gray-500 rounded-r-full text-black font-semibold py-2 px-4 rounded inline-flex items-center"
              >
                <i class="fas fa-clock mr-2"></i>
                <span>Scheduled</span>
              </a>
            </li>
            <!-- marketing emails -->
            <li class="mb-2">
              <a
                href="#"
                class="hover:bg-gray-500 rounded-r-full text-black font-semibold py-2 px-4 rounded inline-flex items-center"
              >
                <i class="fas fa-bullhorn mr-2"></i>
                <span>Marketing Emails</span>
              </a>
            </li>
            <!-- newletter subscribers  -->
            <li class="mb-2">
              <a
                href="newesletter-subscribers"
                class="hover:bg-gray-500 rounded-r-full text-black font-semibold py-2 px-4 rounded inline-flex items-center"
              >
                <i class="fas fa-envelope-open-text mr-2"></i>
                <span>Newsletter Subscribers</span>
              </a>
            </li>
          </ul>
          <div class="container bg-white shadow-lg p-2 rounded-2xl">
            <div class="display-date">
              <span id="day">day</span>,
              <span id="daynum">00</span>
              <span id="month">month</span>
              <span id="year">0000</span>
            </div>
            <div class="display-time"></div>
          </div>
        </aside>
        <!-- left side menu items ends here -->
        <!--  the body content of starts here  -->
        <section
          class="main-content w-full md:w-4/5 p-4 bg-gray-200 m-3 rounded-xl shadow-2xl h-full"
        >
          <!--  Overview of the emails kept in the system. -->
          <div
            class="bg-gray-400 border-2 border-gray-900 rounded-md flex p-3 mb-3 justify-between items-center gap-3"
          >
            <div class="text-center">
              <p class="mb-2 text-3xl text-green-800 font-extrabold">9786</p>
              <p class="text-black text-lg font-extrabold">All Subscribers</p>
            </div>
            <div class="text-center">
              <p class="mb-2 text-3xl text-red-600 font-extrabold">169</p>
              <p class="text-black text-lg font-extrabold">
                Unsubscribed Emails
              </p>
            </div>
            <div class="text-center">
              <p class="mb-2 text-3xl font-extrabold  text-green-500">440</p>
              <p class="text-black text-lg font-extrabold">Visitor Emails</p>
            </div>
            <div class="text-center">
              <p class="mb-2 text-3xl font-extrabold  text-green-400">77</p>
              <p class="text-black text-lg font-extrabold">Newesletters Subs</p>
            </div>
            <div class="text-center">
              <p class="mb-2 text-3xl text-green-600 font-extrabold">99</p>
              <p class="text-black text-lg font-extrabold">Marketing Subs</p>
            </div>
          </div>

          <div class="relative overflow-x-auto shadow-md sm:rounded-lg ">
            <table
              class="w-full  text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400 "
            >
              <thead
                class="text-xs text-gray-900 uppercase bg-gray-100 dark:bg-gray-700 dark:text-gray-600"
              >
                <tr>
                  <th scope="col" class="px-6 py-3">#</th>
                  <th scope="col" class="px-6 py-3">Subscriber Name</th>
                  <th scope="col" class="px-6 py-3">Email Address</th>
                  <th scope="col" class="px-6 py-3"> <i class="fa fa-filter mr-1 bg-gray-400 text-white rounded p-1" aria-hidden="true"></i>Category</th>
                  <th scope="col" class="px-6 py-3"> <i class="fa fa-filter mr-1 bg-gray-400  text-white rounded p-1" aria-hidden="true"></i>Date Subscribed</th>
                  <th scope="col" class="px-6 py-3"> <i class="fa fa-filter mr-1 bg-gray-400 text-white rounded p-1" aria-hidden="true"></i>Status</th>
                  <th scope="col" class="px-6 py-3 text-center ">Actions</th>
                </tr>
              </thead>
              <tbody>
                <tr
                class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"
              >
                <td class="px-6 py-4">1</td>
                <td class="px-6 py-4">Innocent Niyonzima</td>
                <td class="px-6 py-4">niyinnocent2027@gmail.com</td>
                <td class="px-6 py-4">Client</td>
                <td class="px-6 py-4">2021-08-25</td>
                <td class="px-6 py-4">Active</td>
                <td class="px-6 py-4 text-right">
                  <button class="bg-red-500  px-2 py-1 rounded-md text-lg text-white"> Delete</button>
                  <button class="bg-blue-500 px-4 py-1 rounded-md text-lg text-white">Edit</button>
                </td>
              </tr>
              <tr
              class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"
            >
              <td class="px-6 py-4">1</td>
              <td class="px-6 py-4">Innocent Niyonzima</td>
              <td class="px-6 py-4">niyinnocent2027@gmail.com</td>
              <td class="px-6 py-4">Client</td>
              <td class="px-6 py-4">2021-08-25</td>
              <td class="px-6 py-4">Active</td>
              <td class="px-6 py-4 text-right">
                <button class="bg-red-500  px-2 py-1 rounded-md text-lg text-white"> Delete</button>
                <button class="bg-blue-500 px-4 py-1 rounded-md text-lg text-white">Edit</button>
              </td>
            </tr>
            <tr
            class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"
          >
            <td class="px-6 py-4">1</td>
            <td class="px-6 py-4">Innocent Niyonzima</td>
            <td class="px-6 py-4">niyinnocent2027@gmail.com</td>
            <td class="px-6 py-4">
              Client</td>
            <td class="px-6 py-4">2021-08-25</td>
            <td class="px-6 py-4">Active</td>
            <td class="px-6 py-4 text-right">
              <button class="bg-red-500  px-2 py-1 rounded-md text-lg text-white"> Delete</button>
              <button class="bg-blue-500 px-4 py-1 rounded-md text-lg text-white">Edit</button>
            </td>
          </tr>
                <tr
                  class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"
                >
                  <td class="px-6 py-4">1</td>
                  <td class="px-6 py-4">Innocent Niyonzima</td>
                  <td class="px-6 py-4">niyinnocent2027@gmail.com</td>
                  <td class="px-6 py-4">Client</td>
                  <td class="px-6 py-4">2021-08-25</td>
                  <td class="px-6 py-4">Active</td>
                  <td class="px-6 py-4 text-right">
                    <button class="bg-red-500  px-2 py-1 rounded-md text-lg text-white"> Delete</button>
                    <button class="bg-blue-500 px-4 py-1 rounded-md text-lg text-white">Edit</button>
                  </td>
                </tr>
                <tr
                class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"
              >
                <td class="px-6 py-4">1</td>
                <td class="px-6 py-4">Innocent Niyonzima</td>
                <td class="px-6 py-4">niyinnocent2027@gmail.com</td>
                <td class="px-6 py-4">Client</td>
                <td class="px-6 py-4">2021-08-25</td>
                <td class="px-6 py-4">Active</td>
                <td class="px-6 py-4 text-right">
                  <button class="bg-red-500  px-2 py-1 rounded-md text-lg text-white"> Delete</button>
                  <button class="bg-blue-500 px-4 py-1 rounded-md text-lg text-white">Edit</button>
                </td>
              </tr>
              
              <tr
              class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"
            >
              <td class="px-6 py-4">1</td>
              <td class="px-6 py-4">Innocent Niyonzima</td>
              <td class="px-6 py-4">niyinnocent2027@gmail.com</td>
              <td class="px-6 py-4">Client</td>
              <td class="px-6 py-4">2021-08-25</td>
              <td class="px-6 py-4">Active</td>
              <td class="px-6 py-4 text-right">
                <button class="bg-red-500  px-2 py-1 rounded-md text-lg text-white"> Delete</button>
                <button class="bg-blue-500 px-4 py-1 rounded-md text-lg text-white">Edit</button>
              </td>
            </tr>
            
            <tr
            class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"
          >
            <td class="px-6 py-4">1</td>
            <td class="px-6 py-4">Innocent Niyonzima</td>
            <td class="px-6 py-4">niyinnocent2027@gmail.com</td>
            <td class="px-6 py-4">Client</td>
            <td class="px-6 py-4">2021-08-25</td>
            <td class="px-6 py-4">Active</td>
            <td class="px-6 py-4 text-right">
              <button class="bg-red-500  px-2 py-1 rounded-md text-lg text-white"> Delete</button>
              <button class="bg-blue-500 px-4 py-1 rounded-md text-lg text-white">Edit</button>
            </td>
          </tr>
          
          <tr
          class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"
        >
          <td class="px-6 py-4">1</td>
          <td class="px-6 py-4">Innocent Niyonzima</td>
          <td class="px-6 py-4">niyinnocent2027@gmail.com</td>
          <td class="px-6 py-4">Client</td>
          <td class="px-6 py-4">2021-08-25</td>
          <td class="px-6 py-4">Active</td>
          <td class="px-6 py-4 text-right">
            <button class="bg-red-500  px-2 py-1 rounded-md text-lg text-white"> Delete</button>
            <button class="bg-blue-500 px-4 py-1 rounded-md text-lg text-white">Edit</button>
          </td>
        </tr>
        
        <tr
        class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"
      >
        <td class="px-6 py-4">1</td>
        <td class="px-6 py-4">Innocent Niyonzima</td>
        <td class="px-6 py-4">niyinnocent2027@gmail.com</td>
        <td class="px-6 py-4">Client</td>
        <td class="px-6 py-4">2021-08-25</td>
        <td class="px-6 py-4">Active</td>
        <td class="px-6 py-4 text-right">
          <button class="bg-red-500  px-2 py-1 rounded-md text-lg text-white"> Delete</button>
          <button class="bg-blue-500 px-4 py-1 rounded-md text-lg text-white">Edit</button>
        </td>
      </tr>
      
      <tr
      class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"
    >
      <td class="px-6 py-4">1</td>
      <td class="px-6 py-4">Innocent Niyonzima</td>
      <td class="px-6 py-4">niyinnocent2027@gmail.com</td>
      <td class="px-6 py-4">Client</td>
      <td class="px-6 py-4">2021-08-25</td>
      <td class="px-6 py-4">Active</td>
      <td class="px-6 py-4 text-right">
        <button class="bg-red-500  px-2 py-1 rounded-md text-lg text-white"> Delete</button>
        <button class="bg-blue-500 px-4 py-1 rounded-md text-lg text-white">Edit</button>
      </td>
    </tr>
    
    <tr
    class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"
  >
    <td class="px-6 py-4">1</td>
    <td class="px-6 py-4">Innocent Niyonzima</td>
    <td class="px-6 py-4">niyinnocent2027@gmail.com</td>
    <td class="px-6 py-4">Client</td>
    <td class="px-6 py-4">2021-08-25</td>
    <td class="px-6 py-4">Active</td>
    <td class="px-6 py-4 text-right">
      <button class="bg-red-500  px-2 py-1 rounded-md text-lg text-white"> Delete</button>
      <button class="bg-blue-500 px-4 py-1 rounded-md text-lg text-white">Edit</button>
    </td>
  </tr>
  
  <tr
  class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"
>
  <td class="px-6 py-4">1</td>
  <td class="px-6 py-4">Innocent Niyonzima</td>
  <td class="px-6 py-4">niyinnocent2027@gmail.com</td>
  <td class="px-6 py-4">Client</td>
  <td class="px-6 py-4">2021-08-25</td>
  <td class="px-6 py-4">Active</td>
  <td class="px-6 py-4 text-right">
    <button class="bg-red-500  px-2 py-1 rounded-md text-lg text-white"> Delete</button>
    <button class="bg-blue-500 px-4 py-1 rounded-md text-lg text-white">Edit</button>
  </td>
</tr>

<tr
class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"
>
<td class="px-6 py-4">1</td>
<td class="px-6 py-4">Innocent Niyonzima</td>
<td class="px-6 py-4">niyinnocent2027@gmail.com</td>
<td class="px-6 py-4">Client</td>
<td class="px-6 py-4">2021-08-25</td>
<td class="px-6 py-4">Active</td>
<td class="px-6 py-4 text-right">
  <button class="bg-red-500  px-2 py-1 rounded-md text-lg text-white"> Delete</button>
  <button class="bg-blue-500 px-4 py-1 rounded-md text-lg text-white">Edit</button>
</td>
</tr>

              </tbody>
            </table>
          </div>
        </section>
        <!--the  body content ends here -->
      </section>
      <!-- main content ends here  -->
    </main>
    <!--main section ends here   -->
  </body>
  <!-- body ends here  -->

  <!-- scripts here  -->

  <script>
    tinymce.init({
      selector: "textarea",
      plugins:
        "ai tinycomments mentions anchor autolink charmap codesample emoticons image link lists media searchreplace table visualblocks wordcount checklist mediaembed casechange export formatpainter pageembed permanentpen footnotes advtemplate advtable advcode editimage tableofcontents mergetags powerpaste tinymcespellchecker autocorrect a11ychecker typography inlinecss",
      toolbar:
        "undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table mergetags | align lineheight | tinycomments | checklist numlist bullist indent outdent | emoticons charmap | removeformat",
      tinycomments_mode: "embedded",
      tinycomments_author: "Author name",
      mergetags_list: [
        { value: "First.Name", title: "First Name" },
        { value: "Email", title: "Email" },
      ],
      ai_request: (request, respondWith) =>
        respondWith.string(() =>
          Promise.reject("See docs to implement AI Assistant")
        ),
    });
  </script>
  <script>
    const displayTime = document.querySelector(".display-time");
    // Time
    function showTime() {
      let time = new Date();
      displayTime.innerText = time.toLocaleTimeString("en-US", {
        hour12: false,
      });
      setTimeout(showTime, 1000);
    }

    showTime();

    // Date
    function updateDate() {
      let today = new Date();

      // return number
      let dayName = today.getDay(),
        dayNum = today.getDate(),
        month = today.getMonth(),
        year = today.getFullYear();

      const months = [
        "January",
        "February",
        "March",
        "April",
        "May",
        "June",
        "July",
        "August",
        "September",
        "October",
        "November",
        "December",
      ];
      const dayWeek = [
        "Sunday",
        "Monday",
        "Tuesday",
        "Wednesday",
        "Thursday",
        "Friday",
        "Saturday",
      ];
      // value -> ID of the html element
      const IDCollection = ["day", "daynum", "month", "year"];
      // return value array with number as a index
      const val = [dayWeek[dayName], dayNum, months[month], year];
      for (let i = 0; i < IDCollection.length; i++) {
        document.getElementById(IDCollection[i]).firstChild.nodeValue = val[i];
      }
    }

    updateDate();
    function showSettings() {
      const setting = document.querySelector(".settings");
      setting.classList.toggle("show");
    }
    // JavaScript to toggle modal visibility
    document
      .getElementById("openModalButton")
      .addEventListener("click", function () {
        var modal = document.getElementById("composeEmailModal");
        modal.style.display =
          modal.style.display === "none" || modal.style.display === ""
            ? "block"
            : "none";
      });

    // Optional: Add a close button functionality
    document
      .getElementById("closeModalButton")
      .addEventListener("click", function () {
        document.getElementById("composeEmailModal").style.display = "none";
      });
    const emailInput = document.getElementById("emailInput");
    const emailList = document.getElementById("emailList");

    // Event listener for adding email addresses
    emailInput.addEventListener("keydown", handleKeyDown);

    function handleKeyDown(event) {
      const key = event.key;
      const inputValue = emailInput.value.trim();

      // Check if the key pressed is comma or Enter
      if (key === "," || key === "Enter") {
        // Prevent default behavior
        event.preventDefault();

        // Split the input value into individual email addresses if it contains commas
        const emails = inputValue.split(",").map((email) => email.trim());

        // Add each email address to the list
        emails.forEach((email) => addEmailToList(email));

        // Clear the input field
        emailInput.value = "";
      }
    }

    // Function to add email address to the list
    function addEmailToList(email) {
      // If the email address is not empty
      if (email !== "") {
        // Create a new email element
        const emailElement = document.createElement("span");
        emailElement.textContent = email;
        emailElement.classList.add("email");

        // Create a remove symbol element
        const removeSymbol = document.createElement("span");
        removeSymbol.textContent = "✕";
        removeSymbol.classList.add("remove-symbol");

        // Append the remove symbol to the email element
        emailElement.appendChild(removeSymbol);

        // Append the email element to the email list
        emailList.appendChild(emailElement);

        // Add event listener to remove the email element
        removeSymbol.addEventListener("click", () => {
          emailList.removeChild(emailElement);
        });
      }
    }
  </script>
  <!-- the scripts ends here  -->
</html>
<!-- end of the page  -->
